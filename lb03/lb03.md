# PHP Datenbankzuegriff via Apache

## Inhaltsverzeichnis
1. Code Beschreibung
2. Korrekteheit der Angaben
3. Testen
4. Grafische Darstellung
5. Quellenangaben

## 1. Einleitung
Ich erstelle ein Docker-Compose, die eine MySQL-Datenbank per MyPHP ins LAN zu Verfügung stellt. Als Grundlage für Docker nehme ich eine Kopie der VM, welche Herr Berger in seinem M300 Github zur Verfügung stellt.

## 2. Code Beschreibung

Im bereits existierenden m300_lb Ordner einen Unterordner Namens lb03 erstellen.
Die zur Verfügung gestellte Vagrantfile vom Master ins lb03 Verzeichnis herüber kopieren.
```bash Codiger Code ist hier gecoded
cd m300_lb\
mkdir lb03
```

Anschliessend im Verzeichnis Git Bash öffnen und die VM mit folgenden Befehlen starten und SSH Verbindung aufbauen.
```bash Codiger Code ist hier gecoded
vagrant up
vagrant ssh
```

Mit dem Befehl ```nano Dockerfile``` wird ein File Namens Dockerfile erstellt. In diesem File schreiben wir den Text weiter unten hinein.

```bash Codiger Code ist hier gecoded
FROM php:7.4-apache
RUN apt-get update && apt-get upgrade -y
RUN docker-php-ext-install mysqli
EXPOSE 80
```
![](\Bilder\cat_dockerfile.JPG) 














__________________________________________
Wir bilden den Docker Image **my-php-app** mit folgendem Befehl. 
```bash Codiger Code ist hier gecoded
docker build -t my-php-app .
```

Es wird einen Moment dauer bis es alle Informationen hat.
![](\Bilder\docker_build.JPG) 


Nach dem des gebildet wurde, lassen wir **my-running-app** laufen.
```bash Codiger Code ist hier gecoded
docker run -it --rm --name my-running-app my-php-app
```

Nun sollte es den Text, den wir im Index-File geschrieben hatten, anzeigen:
![index output](\Bilder\index_output.JPG) 


### Nun wollen wir diesen Output im Browser sehen. 
Für das brauchen wir den Apache.

### Docker-Compose File erstellen

Wir erstellen ein Docker-Compose File mit nano. 
Wir bestimmen die Version vom Docker-Compose auf 3.1. Danach richten wir die Services ein. PHP rep Container benutzt den Image php:7.4-apache. Mit dem Port 80:80. Auf der Linken Seite unser Port und auf der rechten Seite Containers Port. Dann setzen wir einen Volumen für unseren Code/Source File, welches im angegeben Verzeichnis gespeichert wird.

```bash Codiger Code ist hier gecoded
nano docker-compose.yml
version: '3.1'

services:
  php:
    image: php:7.4-apache
    ports:
      - 80:80
    volumes:
      - ./src:/var/www/html/
```



```bash Codiger Code ist hier gecoded

```



```bash Codiger Code ist hier gecoded

```

```bash Codiger Code ist hier gecoded
nano Dockerfile
FROM php:7.4-cli
COPY . /usr/src/myapp
WORKDIR /usr/src/myapp
CMD [ "php", "./index.php" ]

```

###Apache

###MySQL



## 3. Korrekteheit der Angaben

## 4. Testen
###Apache

###MySQL

## 5. Grafische Darstellung

## 6. Quellenangaben
### Youtube Videos zu Apache, PHP & MySQL
https://www.youtube.com/watch?v=_mwWxgfZ7Zc&ab_channel=NevyanNeykov

https://www.youtube.com/watch?v=ThpnqYpvnIM&ab_channel=TruthSeekers

### Anleitung
https://truthseekers.io/php-docker-simple-environment/